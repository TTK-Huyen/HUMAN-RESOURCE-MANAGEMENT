/* --- GLOBAL --- */
:root {
  --primary-color: #0f172a;
  --bg-color: #f1f5f9;
  --card-bg: #ffffff;
  --text-main: #334155;
  --text-muted: #64748b;
  --border-color: #e2e8f0;
}

.pa-container { padding: 1.5rem; background: var(--bg-color); min-height: 100vh; font-family: sans-serif; }
.pa-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
.pa-title h1 { margin: 0; font-size: 1.75rem; color: var(--primary-color); }

/* --- STATS --- */
.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
.stat-card { background: white; padding: 1.5rem; border-radius: 1rem; border: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.stat-value { font-size: 2rem; font-weight: 800; color: var(--primary-color); }
.stat-info p { margin: 0; font-size: 0.85rem; color: var(--text-muted); text-transform: uppercase; font-weight: 600; }
.stat-icon { padding: 1rem; border-radius: 12px; display: flex; }
.stat-card.blue .stat-icon { background: #eff6ff; color: #2563eb; }
.stat-card.yellow .stat-icon { background: #fef9c3; color: #ca8a04; }
.stat-card.green .stat-icon { background: #dcfce7; color: #16a34a; }
.stat-card.red .stat-icon { background: #fee2e2; color: #dc2626; }

/* --- FILTERS --- */
.filter-bar { display: flex; gap: 1rem; margin-bottom: 1.5rem; }
.input-group { background: white; border: 1px solid var(--border-color); padding: 0.75rem 1rem; border-radius: 12px; display: flex; align-items: center; gap: 10px; }
.search-wrapper { flex: 1; }
.input-group input, .input-group select { border: none; outline: none; width: 100%; font-size: 0.95rem; }

/* --- TABLE --- */
.table-container { background: white; border-radius: 1rem; border: 1px solid var(--border-color); overflow: hidden; }
.table-responsive { overflow-x: auto; }
.pa-table { width: 100%; border-collapse: collapse; text-align: left; }
.pa-table th { background: #f8fafc; padding: 1rem 1.5rem; font-size: 0.75rem; text-transform: uppercase; color: var(--text-muted); font-weight: 700; }
.pa-table td { padding: 1rem 1.5rem; border-bottom: 1px solid var(--border-color); vertical-align: middle; }

/* Cell Styles */
.cell-type { display: flex; align-items: center; gap: 12px; }
.type-icon { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; border-radius: 8px; }
.bg-blue { background: #eff6ff; color: #2563eb; }
.bg-orange { background: #fff7ed; color: #ea580c; }
.bg-red { background: #fef2f2; color: #dc2626; }
.bg-gray { background: #f1f5f9; color: #64748b; }

.user-cell { display: flex; align-items: center; gap: 10px; }
.avatar-small { width: 32px; height: 32px; background: #e2e8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.8rem; }
.avatar-med { width: 40px; height: 40px; background: #e2e8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1rem; }

/* Fix cho Decided / Eff Date */
.date-cell { display: flex; flex-direction: column; gap: 4px; }
.date-row { display: flex; align-items: center; gap: 6px; font-size: 0.85rem; }
.date-label { color: #94a3b8; width: 60px; } /* Căn thẳng hàng */
.date-val { color: #334155; font-weight: 500; }

.status-badge { padding: 4px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 700; display: inline-flex; align-items: center; gap: 5px; }
.status-badge.pending { background: #fef9c3; color: #854d0e; }
.status-badge.approved { background: #dcfce7; color: #166534; }
.status-badge.rejected { background: #fee2e2; color: #991b1b; }

.btn-view { border: 1px solid var(--border-color); background: white; padding: 6px; border-radius: 6px; cursor: pointer; color: var(--text-muted); }
.btn-view:hover { background: #eff6ff; color: #2563eb; border-color: #2563eb; }

/* --- MODAL --- */
.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 999; display: flex; justify-content: flex-end; }
.modal-drawer { width: 500px; max-width: 90%; background: white; display: flex; flex-direction: column; animation: slideIn 0.3s; }
@keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

.drawer-header { padding: 1.5rem; border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
.drawer-body { flex: 1; overflow-y: auto; padding: 1.5rem; }
.drawer-footer { padding: 1.5rem; border-top: 1px solid var(--border-color); background: #fff; }

.info-box { background: white; border: 1px solid var(--border-color); border-radius: 8px; padding: 1rem; margin-bottom: 1.5rem; }
.info-row { display: flex; justify-content: space-between; margin-bottom: 0.75rem; font-size: 0.9rem; border-bottom: 1px dashed #f1f5f9; padding-bottom: 0.5rem; }
.info-row:last-child { border: none; margin: 0; padding: 0; }
.info-label { color: var(--text-muted); }
.info-val { font-weight: 600; color: var(--primary-color); text-align: right; }
.section-title { font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; font-size: 1rem; }

/* --- TIMELINE HISTORY --- */
.timeline { position: relative; padding-left: 10px; border-left: 2px solid #e2e8f0; margin-left: 10px; }
.timeline-item { position: relative; padding-left: 20px; padding-bottom: 20px; }
.timeline-item:last-child { padding-bottom: 0; }
.timeline-dot { position: absolute; left: -7px; top: 0; width: 12px; height: 12px; border-radius: 50%; background: #fff; border: 2px solid #cbd5e1; }
.timeline-dot.active { border-color: #3b82f6; background: #3b82f6; }
.timeline-dot.approved { border-color: #22c55e; background: #22c55e; }
.timeline-dot.rejected { border-color: #dc2626; background: #dc2626; }

.history-content .status { font-weight: 700; font-size: 0.9rem; }
.history-content .actor { font-size: 0.85rem; color: #475569; margin: 2px 0; }
.history-content .date { font-size: 0.75rem; color: #94a3b8; }

/* --- BUTTONS --- */
.btn-group { display: flex; gap: 10px; }
.btn-action { flex: 1; padding: 12px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 6px; }
.btn-approve { background: #0f172a; color: white; }
.btn-reject { background: #fee2e2; color: #991b1b; }
.btn-cancel { background: #f1f5f9; color: #64748b; }
.btn-confirm-reject { background: #dc2626; color: white; }

.reject-box { margin-top: 10px; animation: fadeIn 0.3s; }
.reject-label { font-size: 0.9rem; font-weight: 600; display: block; margin-bottom: 5px; }
.reject-box textarea { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; margin-bottom: 10px; font-family: inherit; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

/* --- TABLE STYLES --- */
.date-cell { display: flex; flex-direction: column; gap: 4px; }
.date-row { display: flex; align-items: center; justify-content: space-between; font-size: 0.8rem; gap: 8px; }
.date-label { color: #94a3b8; font-weight: 500; }
.date-val { color: #334155; font-weight: 600; }

.user-cell { display: flex; align-items: center; gap: 10px; }
.avatar-small { width: 32px; height: 32px; background: #e2e8f0; border-radius: 50%; display: flex; alignItems: center; justify-content: center; font-weight: 700; font-size: 0.8rem; }
.avatar-med { width: 42px; height: 42px; background: #e2e8f0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.1rem; }
.sub-text { font-size: 0.8rem; color: #64748b; }
.fw-600 { font-weight: 600; }

/* --- TIMELINE HISTORY (SƯỜN DỌC) --- */
.timeline { position: relative; padding-left: 8px; margin-top: 10px; }
.timeline-item { position: relative; padding-left: 28px; padding-bottom: 24px; border-left: 2px solid #e2e8f0; }
.timeline-item:last-child { border-left: 2px solid transparent; padding-bottom: 0; }

/* Dấu chấm tròn */
.timeline-dot {
    position: absolute; left: -7px; top: 0; 
    width: 12px; height: 12px; border-radius: 50%; 
    background: #fff; border: 2px solid #cbd5e1;
    z-index: 1;
}
.timeline-dot.active { border-color: #64748b; background: #64748b; } /* Created - Xám */
.timeline-dot.pending { border-color: #d97706; background: #fff; } /* Pending - Cam rỗng */
.timeline-dot.approved { border-color: #16a34a; background: #16a34a; } /* Approved - Xanh */
.timeline-dot.rejected { border-color: #dc2626; background: #dc2626; } /* Rejected - Đỏ */

.history-content .status { font-weight: 700; font-size: 0.95rem; margin-bottom: 2px; }
.history-content .actor { font-size: 0.85rem; color: #1e293b; margin-bottom: 2px; }
.history-content .date { font-size: 0.75rem; color: #94a3b8; }

/* --- BUTTONS --- */
.btn-group { display: flex; gap: 10px; width: 100%; }
.btn-action { flex: 1; padding: 10px; border-radius: 6px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 6px; border: none; }
.btn-approve { background: #0f172a; color: white; }
.btn-reject { background: #fee2e2; color: #991b1b; }
.btn-cancel { background: #f1f5f9; color: #64748b; }
.btn-confirm-reject { background: #dc2626; color: white; }
.btn-close { border: none; background: transparent; cursor: pointer; color: #64748b; }

.reject-box { margin-top: 10px; animation: fadeIn 0.3s; }
.reject-box textarea { width: 100%; border: 1px solid #cbd5e1; border-radius: 6px; padding: 8px; margin-bottom: 8px; }
.bg-gray { background: #f8fafc; }
.text-center { text-align: center; }

/* --- TOAST NOTIFICATION --- */
.toast-notification {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #1e293b; /* Nền tối */
    color: white;
    padding: 12px 24px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    z-index: 9999;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    animation: slideDown 0.3s ease-out;
    font-weight: 500;
    font-size: 0.95rem;
    min-width: 300px;
}

.toast-notification.success {
    background: #10b981; /* Màu xanh lá */
    border-left: 5px solid #065f46;
}

.toast-notification.error {
    background: #ef4444; /* Màu đỏ */
    border-left: 5px solid #991b1b;
}

@keyframes slideDown {
    from { opacity: 0; transform: translate(-50%, -20px); }
    to { opacity: 1; transform: translate(-50%, 0); }
}
/* ... (Giữ nguyên các CSS cũ của bạn ở trên) ... */

/* =========================================
   TOAST NOTIFICATION (THÔNG BÁO TỰ TẮT)
   ========================================= */
.toast-notification {
  position: fixed;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #1e293b; /* Màu nền tối mặc định */
  color: white;
  padding: 12px 24px;
  border-radius: 10px;
  display: flex;
  align-items: center;
  gap: 12px;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.2), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
  z-index: 10000; /* Đảm bảo nổi cao hơn cả Modal và Popup */
  min-width: 320px;
  max-width: 90%;
  font-weight: 500;
  font-size: 0.95rem;
  opacity: 0;
  animation: toastSlideDown 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* Màu xanh cho Success */
.toast-notification.success {
  background-color: #10b981; /* Emerald-500 */
  border-left: 5px solid #047857; /* Emerald-700 */
}

/* Màu đỏ cho Error */
.toast-notification.error {
  background-color: #ef4444; /* Red-500 */
  border-left: 5px solid #b91c1c; /* Red-700 */
}

.toast-notification svg {
  flex-shrink: 0; /* Giữ icon không bị méo */
}

/* Hiệu ứng trượt xuống */
@keyframes toastSlideDown {
  from {
    opacity: 0;
    transform: translate(-50%, -100%);
  }
  to {
    opacity: 1;
    transform: translate(-50%, 0);
  }
}

/* =========================================
   STYLE BỔ SUNG CHO POPUP XÁC NHẬN
   ========================================= */

/* Nút Confirm Approve (Màu Xanh Dương) */
.btn-confirm-approve {
  background-color: #2563eb; /* Blue-600 */
  color: white;
  border: none;
  box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3);
  transition: background-color 0.2s;
}

.btn-confirm-approve:hover {
  background-color: #1d4ed8; /* Blue-700 */
}

/* Nút Confirm Reject/Logout (Màu Đỏ - Có thể đã có, nhưng thêm cho chắc) */
.btn-confirm-logout {
  background-color: #dc2626; /* Red-600 */
  color: white;
  border: none;
  box-shadow: 0 4px 6px -1px rgba(220, 38, 38, 0.3);
  transition: background-color 0.2s;
}

.btn-confirm-logout:hover {
  background-color: #b91c1c; /* Red-700 */
}

/* Style chung cho nút trong popup */
.btn-popup {
  padding: 10px 20px;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  font-size: 0.9rem;
}

.btn-cancel-logout {
  background-color: #f1f5f9;
  color: #475569;
  border: 1px solid #e2e8f0;
}

.btn-cancel-logout:hover {
  background-color: #e2e8f0;
}